/*---------------------------------------------------------------------------*\
 *                             Kabala Engine                                 *
 *                                                                           *
 *               Copyright (C) 2009-2010 by David Kabala                     *
 *                                                                           *
 *   authors:  David Kabala (djkabala@gmail.com)                             *
 *                                                                           *
\*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*\
 *                                License                                    *
 *                                                                           *
 * This library is free software; you can redistribute it and/or modify it   *
 * under the terms of the GNU General Public License as published            *
 * by the Free Software Foundation, version 3.                               *
 *                                                                           *
 * This library is distributed in the hope that it will be useful, but       *
 * WITHOUT ANY WARRANTY; without even the implied warranty of                *
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU         *
 * Library General Public License for more details.                          *
 *                                                                           *
 * You should have received a copy of the GNU General Public                 *
 * License along with this library; if not, write to the Free Software       *
 * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.                 *
 *                                                                           *
\*---------------------------------------------------------------------------*/
/*---------------------------------------------------------------------------*\
 *                                Changes                                    *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
 *                                                                           *
\*---------------------------------------------------------------------------*/

/*****************************************************************************\
 *****************************************************************************
 **                                                                         **
 **                  This file is automatically generated.                  **
 **                                                                         **
 **          Any changes made to this file WILL be lost when it is          **
 **           regenerated, which can become necessary at any time.          **
 **                                                                         **
 **     Do not change this file, changes should be done in the derived      **
 **     class Scene!
 **                                                                         **
 *****************************************************************************
\*****************************************************************************/

#include <cstdlib>
#include <cstdio>
#include <boost/assign/list_of.hpp>

#include <OpenSG/OSGConfig.h>



#include "Project/SceneObject/KESceneObject.h" // SceneObjects Class
#include "Project/KEProjectFields.h"    // ParentProject Class
#include <OpenSG/OSGFieldContainer.h>   // ObjectStore Class
#include <OpenSG/OSGViewport.h>         // Viewports Class
#include <OpenSG/OSGUIDrawingSurface.h> // UIDrawingSurfaces Class
#include <OpenSG/OSGAnimation.h>        // Animations Class
#include <OpenSG/OSGParticleSystem.h>   // InitialParticleSystems Class
#include <OpenSG/OSGPhysicsHandler.h>   // PhysicsHandler Class
#include <OpenSG/OSGPhysicsWorld.h>     // PhysicsWorld Class

#include "KESceneBase.h"
#include "KEScene.h"

#include <boost/bind.hpp>

#include <OpenSG/OSGEventDetails.h>

#ifdef WIN32 // turn off 'this' : used in base member initializer list warning
#pragma warning(disable:4355)
#endif

OSG_BEGIN_NAMESPACE

/***************************************************************************\
 *                            Description                                  *
\***************************************************************************/

/*! \class OSG::Scene
    The Scene.
 */

/***************************************************************************\
 *                        Field Documentation                              *
\***************************************************************************/

/*! \var SceneObject *   SceneBase::_mfSceneObjects
    
*/

/*! \var FieldContainer * SceneBase::_sfParentProject
    The Project this Scene is contained in.
*/

/*! \var FieldContainer * SceneBase::_mfObjectStore
    
*/

/*! \var Viewport *      SceneBase::_mfViewports
    
*/

/*! \var UIDrawingSurface * SceneBase::_mfUIDrawingSurfaces
    
*/

/*! \var Animation *     SceneBase::_mfAnimations
    
*/

/*! \var Animation *     SceneBase::_mfInitialAnimations
    
*/

/*! \var ParticleSystem * SceneBase::_mfInitialParticleSystems
    
*/

/*! \var BoostPath       SceneBase::_sfLuaModule
    
*/

/*! \var PhysicsHandler * SceneBase::_sfPhysicsHandler
    
*/

/*! \var PhysicsWorld *  SceneBase::_sfPhysicsWorld
    
*/

/*! \var UInt32          SceneBase::_sfGenericMethodIDs
    
*/


/***************************************************************************\
 *                      FieldType/FieldTrait Instantiation                 *
\***************************************************************************/

#if !defined(OSG_DO_DOC) || defined(OSG_DOC_DEV)
DataType FieldTraits<Scene *>::_type("ScenePtr", "AttachmentContainerPtr");
#endif

OSG_FIELDTRAITS_GETTYPE(Scene *)

OSG_EXPORT_PTR_SFIELD_FULL(PointerSField,
                           Scene *,
                           0);

OSG_EXPORT_PTR_MFIELD_FULL(PointerMField,
                           Scene *,
                           0);

DataType &FieldTraits< Scene *, 1 >::getType(void)
{
    return FieldTraits<Scene *, 0>::getType();
}


OSG_EXPORT_PTR_MFIELD(ChildPointerMField,
                      Scene *,
                      UnrecordedRefCountPolicy,
                      1);


/***************************************************************************\
 *                         Field Description                               *
\***************************************************************************/

void SceneBase::classDescInserter(TypeObject &oType)
{
    FieldDescriptionBase *pDesc = NULL;


    pDesc = new MFUnrecChildSceneObjectPtr::Description(
        MFUnrecChildSceneObjectPtr::getClassType(),
        "SceneObjects",
        "",
        SceneObjectsFieldId, SceneObjectsFieldMask,
        false,
        (Field::MFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleSceneObjects),
        static_cast<FieldGetMethodSig >(&Scene::getHandleSceneObjects));

    oType.addInitialDesc(pDesc);

    pDesc = new SFParentFieldContainerPtr::Description(
        SFParentFieldContainerPtr::getClassType(),
        "ParentProject",
        "The Project this Scene is contained in.\n",
        ParentProjectFieldId, ParentProjectFieldMask,
        false,
        (Field::SFDefaultFlags | Field::FStdAccess),
        static_cast     <FieldEditMethodSig>(&Scene::invalidEditField),
        static_cast     <FieldGetMethodSig >(&Scene::invalidGetField));

    oType.addInitialDesc(pDesc);

    pDesc = new MFUnrecFieldContainerPtr::Description(
        MFUnrecFieldContainerPtr::getClassType(),
        "ObjectStore",
        "",
        ObjectStoreFieldId, ObjectStoreFieldMask,
        false,
        (Field::MFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleObjectStore),
        static_cast<FieldGetMethodSig >(&Scene::getHandleObjectStore));

    oType.addInitialDesc(pDesc);

    pDesc = new MFUnrecViewportPtr::Description(
        MFUnrecViewportPtr::getClassType(),
        "Viewports",
        "",
        ViewportsFieldId, ViewportsFieldMask,
        false,
        (Field::MFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleViewports),
        static_cast<FieldGetMethodSig >(&Scene::getHandleViewports));

    oType.addInitialDesc(pDesc);

    pDesc = new MFUnrecUIDrawingSurfacePtr::Description(
        MFUnrecUIDrawingSurfacePtr::getClassType(),
        "UIDrawingSurfaces",
        "",
        UIDrawingSurfacesFieldId, UIDrawingSurfacesFieldMask,
        false,
        (Field::MFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleUIDrawingSurfaces),
        static_cast<FieldGetMethodSig >(&Scene::getHandleUIDrawingSurfaces));

    oType.addInitialDesc(pDesc);

    pDesc = new MFUnrecAnimationPtr::Description(
        MFUnrecAnimationPtr::getClassType(),
        "Animations",
        "",
        AnimationsFieldId, AnimationsFieldMask,
        false,
        (Field::MFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleAnimations),
        static_cast<FieldGetMethodSig >(&Scene::getHandleAnimations));

    oType.addInitialDesc(pDesc);

    pDesc = new MFUnrecAnimationPtr::Description(
        MFUnrecAnimationPtr::getClassType(),
        "InitialAnimations",
        "",
        InitialAnimationsFieldId, InitialAnimationsFieldMask,
        false,
        (Field::MFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleInitialAnimations),
        static_cast<FieldGetMethodSig >(&Scene::getHandleInitialAnimations));

    oType.addInitialDesc(pDesc);

    pDesc = new MFUnrecParticleSystemPtr::Description(
        MFUnrecParticleSystemPtr::getClassType(),
        "InitialParticleSystems",
        "",
        InitialParticleSystemsFieldId, InitialParticleSystemsFieldMask,
        false,
        (Field::MFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleInitialParticleSystems),
        static_cast<FieldGetMethodSig >(&Scene::getHandleInitialParticleSystems));

    oType.addInitialDesc(pDesc);

    pDesc = new SFBoostPath::Description(
        SFBoostPath::getClassType(),
        "LuaModule",
        "",
        LuaModuleFieldId, LuaModuleFieldMask,
        false,
        (Field::SFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleLuaModule),
        static_cast<FieldGetMethodSig >(&Scene::getHandleLuaModule));

    oType.addInitialDesc(pDesc);

    pDesc = new SFUnrecPhysicsHandlerPtr::Description(
        SFUnrecPhysicsHandlerPtr::getClassType(),
        "PhysicsHandler",
        "",
        PhysicsHandlerFieldId, PhysicsHandlerFieldMask,
        false,
        (Field::SFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandlePhysicsHandler),
        static_cast<FieldGetMethodSig >(&Scene::getHandlePhysicsHandler));

    oType.addInitialDesc(pDesc);

    pDesc = new SFUnrecPhysicsWorldPtr::Description(
        SFUnrecPhysicsWorldPtr::getClassType(),
        "PhysicsWorld",
        "",
        PhysicsWorldFieldId, PhysicsWorldFieldMask,
        false,
        (Field::SFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandlePhysicsWorld),
        static_cast<FieldGetMethodSig >(&Scene::getHandlePhysicsWorld));

    oType.addInitialDesc(pDesc);

    pDesc = new SFUInt32::Description(
        SFUInt32::getClassType(),
        "GenericMethodIDs",
        "",
        GenericMethodIDsFieldId, GenericMethodIDsFieldMask,
        true,
        (Field::SFDefaultFlags | Field::FStdAccess),
        static_cast<FieldEditMethodSig>(&Scene::editHandleGenericMethodIDs),
        static_cast<FieldGetMethodSig >(&Scene::getHandleGenericMethodIDs));

    oType.addInitialDesc(pDesc);
}


SceneBase::TypeObject SceneBase::_type(
    SceneBase::getClassname(),
    Inherited::getClassname(),
    "NULL",
    0,
    reinterpret_cast<PrototypeCreateF>(&SceneBase::createEmptyLocal),
    Scene::initMethod,
    Scene::exitMethod,
    reinterpret_cast<InitalInsertDescFunc>(&Scene::classDescInserter),
    false,
    0,
    "<?xml version=\"1.0\"?>\n"
    "\n"
    "<FieldContainer\n"
    "\tname=\"Scene\"\n"
    "\tparent=\"AttachmentContainer\"\n"
    "\tlibrary=\"KabalaEngine\"\n"
    "\tpointerfieldtypes=\"both\"\n"
    "\tstructure=\"concrete\"\n"
    "\tsystemcomponent=\"false\"\n"
    "\tparentsystemcomponent=\"true\"\n"
    "\tdecoratable=\"false\"\n"
    "\tuseLocalIncludes=\"false\"\n"
    "\tlibnamespace=\"KE\"\n"
    "    authors=\"David Kabala (djkabala@gmail.com)                             \"\n"
    "    childFields=\"multi\"\n"
    ">\n"
    "The Scene.\n"
    "    <Field\n"
    "\t\tname=\"SceneObjects\"\n"
    "\t\ttype=\"SceneObject\"\n"
    "        childParentType=\"FieldContainer\"\n"
    "\t\tcategory=\"childpointer\"\n"
    "\t\tcardinality=\"multi\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\tfieldHeader=\"Project/SceneObject/KESceneObjectFields.h\"\n"
    "\t\ttypeHeader=\"Project/SceneObject/KESceneObject.h\"\n"
    "\t\taccess=\"public\"\n"
    "        linkParentField=\"ParentScene\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t   name=\"ParentProject\"\n"
    "\t   type=\"FieldContainer\"\n"
    "\t   cardinality=\"single\"\n"
    "\t   visibility=\"external\"\n"
    "\t   access=\"none\"\n"
    "       doRefCount=\"false\"\n"
    "       passFieldMask=\"true\"\n"
    "       category=\"parentpointer\"\n"
    "\t   fieldHeader=\"Project/KEProjectFields.h\"\n"
    "\t   typeHeader=\"Project/KEProjectFields.h\"\n"
    "\t   >\n"
    "\t  The Project this Scene is contained in.\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"ObjectStore\"\n"
    "\t\ttype=\"FieldContainer\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"multi\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"Viewports\"\n"
    "\t\ttype=\"Viewport\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"multi\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"UIDrawingSurfaces\"\n"
    "\t\ttype=\"UIDrawingSurface\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"multi\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"Animations\"\n"
    "\t\ttype=\"Animation\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"multi\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"InitialAnimations\"\n"
    "\t\ttype=\"Animation\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"multi\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"InitialParticleSystems\"\n"
    "\t\ttype=\"ParticleSystem\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"multi\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"LuaModule\"\n"
    "\t\ttype=\"BoostPath\"\n"
    "\t\tcardinality=\"single\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"PhysicsHandler\"\n"
    "\t\ttype=\"PhysicsHandler\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"single\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "        defaultValue=\"NULL\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"PhysicsWorld\"\n"
    "\t\ttype=\"PhysicsWorld\"\n"
    "\t\tcategory=\"pointer\"\n"
    "\t\tcardinality=\"single\"\n"
    "\t\tvisibility=\"external\"\n"
    "\t\taccess=\"public\"\n"
    "        defaultValue=\"NULL\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t<Field\n"
    "\t\tname=\"GenericMethodIDs\"\n"
    "\t\ttype=\"UInt32\"\n"
    "\t\tcardinality=\"single\"\n"
    "\t\tvisibility=\"internal\"\n"
    "\t\taccess=\"protected\"\n"
    "\t>\n"
    "\t</Field>\n"
    "\t\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"SceneEntered\"\n"
    "\t\tdetailsType=\"SceneEventDetails\"\n"
    "\t\tfieldHeader=\"Project/Scene/KESceneEventDetailsFields.h\"\n"
    "\t\ttypeHeader=\"Project/Scene/KESceneEventDetails.h\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"SceneExited\"\n"
    "\t\tdetailsType=\"SceneEventDetails\"\n"
    "\t\tfieldHeader=\"Project/Scene/KESceneEventDetailsFields.h\"\n"
    "\t\ttypeHeader=\"Project/Scene/KESceneEventDetails.h\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"SceneStarted\"\n"
    "\t\tdetailsType=\"SceneEventDetails\"\n"
    "\t\tfieldHeader=\"Project/Scene/KESceneEventDetailsFields.h\"\n"
    "\t\ttypeHeader=\"Project/Scene/KESceneEventDetails.h\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"SceneEnded\"\n"
    "\t\tdetailsType=\"SceneEventDetails\"\n"
    "\t\tfieldHeader=\"Project/Scene/KESceneEventDetailsFields.h\"\n"
    "\t\ttypeHeader=\"Project/Scene/KESceneEventDetails.h\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"SceneReset\"\n"
    "\t\tdetailsType=\"SceneEventDetails\"\n"
    "\t\tfieldHeader=\"Project/Scene/KESceneEventDetailsFields.h\"\n"
    "\t\ttypeHeader=\"Project/Scene/KESceneEventDetails.h\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowOpened\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowClosing\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowClosed\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowIconified\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowDeiconified\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowActivated\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowDeactivated\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowEntered\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"WindowExited\"\n"
    "\t\tdetailsType=\"WindowEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MouseClicked\"\n"
    "\t\tdetailsType=\"MouseEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MouseEntered\"\n"
    "\t\tdetailsType=\"MouseEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MouseExited\"\n"
    "\t\tdetailsType=\"MouseEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MousePressed\"\n"
    "\t\tdetailsType=\"MouseEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MouseReleased\"\n"
    "\t\tdetailsType=\"MouseEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MouseMoved\"\n"
    "\t\tdetailsType=\"MouseEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MouseDragged\"\n"
    "\t\tdetailsType=\"MouseEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"MouseWheelMoved\"\n"
    "\t\tdetailsType=\"MouseWheelEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"KeyPressed\"\n"
    "\t\tdetailsType=\"KeyEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"KeyReleased\"\n"
    "\t\tdetailsType=\"KeyEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"KeyTyped\"\n"
    "\t\tdetailsType=\"KeyEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "\t<ProducedEvent\n"
    "\t\tname=\"Update\"\n"
    "\t\tdetailsType=\"UpdateEventDetails\"\n"
    "\t\tconsumable=\"true\"\n"
    "\t>\n"
    "\t</ProducedEvent>\n"
    "</FieldContainer>\n",
    "The Scene.\n"
    );

//! Scene Produced Events

EventDescription *SceneBase::_eventDesc[] =
{
    new EventDescription("SceneEntered", 
                          "",
                          SceneEnteredEventId, 
                          FieldTraits<SceneEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleSceneEnteredSignal)),

    new EventDescription("SceneExited", 
                          "",
                          SceneExitedEventId, 
                          FieldTraits<SceneEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleSceneExitedSignal)),

    new EventDescription("SceneStarted", 
                          "",
                          SceneStartedEventId, 
                          FieldTraits<SceneEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleSceneStartedSignal)),

    new EventDescription("SceneEnded", 
                          "",
                          SceneEndedEventId, 
                          FieldTraits<SceneEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleSceneEndedSignal)),

    new EventDescription("SceneReset", 
                          "",
                          SceneResetEventId, 
                          FieldTraits<SceneEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleSceneResetSignal)),

    new EventDescription("WindowOpened", 
                          "",
                          WindowOpenedEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowOpenedSignal)),

    new EventDescription("WindowClosing", 
                          "",
                          WindowClosingEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowClosingSignal)),

    new EventDescription("WindowClosed", 
                          "",
                          WindowClosedEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowClosedSignal)),

    new EventDescription("WindowIconified", 
                          "",
                          WindowIconifiedEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowIconifiedSignal)),

    new EventDescription("WindowDeiconified", 
                          "",
                          WindowDeiconifiedEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowDeiconifiedSignal)),

    new EventDescription("WindowActivated", 
                          "",
                          WindowActivatedEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowActivatedSignal)),

    new EventDescription("WindowDeactivated", 
                          "",
                          WindowDeactivatedEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowDeactivatedSignal)),

    new EventDescription("WindowEntered", 
                          "",
                          WindowEnteredEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowEnteredSignal)),

    new EventDescription("WindowExited", 
                          "",
                          WindowExitedEventId, 
                          FieldTraits<WindowEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleWindowExitedSignal)),

    new EventDescription("MouseClicked", 
                          "",
                          MouseClickedEventId, 
                          FieldTraits<MouseEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMouseClickedSignal)),

    new EventDescription("MouseEntered", 
                          "",
                          MouseEnteredEventId, 
                          FieldTraits<MouseEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMouseEnteredSignal)),

    new EventDescription("MouseExited", 
                          "",
                          MouseExitedEventId, 
                          FieldTraits<MouseEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMouseExitedSignal)),

    new EventDescription("MousePressed", 
                          "",
                          MousePressedEventId, 
                          FieldTraits<MouseEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMousePressedSignal)),

    new EventDescription("MouseReleased", 
                          "",
                          MouseReleasedEventId, 
                          FieldTraits<MouseEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMouseReleasedSignal)),

    new EventDescription("MouseMoved", 
                          "",
                          MouseMovedEventId, 
                          FieldTraits<MouseEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMouseMovedSignal)),

    new EventDescription("MouseDragged", 
                          "",
                          MouseDraggedEventId, 
                          FieldTraits<MouseEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMouseDraggedSignal)),

    new EventDescription("MouseWheelMoved", 
                          "",
                          MouseWheelMovedEventId, 
                          FieldTraits<MouseWheelEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleMouseWheelMovedSignal)),

    new EventDescription("KeyPressed", 
                          "",
                          KeyPressedEventId, 
                          FieldTraits<KeyEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleKeyPressedSignal)),

    new EventDescription("KeyReleased", 
                          "",
                          KeyReleasedEventId, 
                          FieldTraits<KeyEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleKeyReleasedSignal)),

    new EventDescription("KeyTyped", 
                          "",
                          KeyTypedEventId, 
                          FieldTraits<KeyEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleKeyTypedSignal)),

    new EventDescription("Update", 
                          "",
                          UpdateEventId, 
                          FieldTraits<UpdateEventDetails *>::getType(),
                          true,
                          static_cast<EventGetMethod>(&SceneBase::getHandleUpdateSignal))

};

EventProducerType SceneBase::_producerType(
    "SceneProducerType",
    "EventProducerType",
    "",
    InitEventProducerFunctor(),
    _eventDesc,
    sizeof(_eventDesc));

/*------------------------------ get -----------------------------------*/

FieldContainerType &SceneBase::getType(void)
{
    return _type;
}

const FieldContainerType &SceneBase::getType(void) const
{
    return _type;
}

const EventProducerType &SceneBase::getProducerType(void) const
{
    return _producerType;
}

UInt32 SceneBase::getContainerSize(void) const
{
    return sizeof(Scene);
}

/*------------------------- decorator get ------------------------------*/


//! Get the Scene::_mfSceneObjects field.
const MFUnrecChildSceneObjectPtr *SceneBase::getMFSceneObjects(void) const
{
    return &_mfSceneObjects;
}

MFUnrecChildSceneObjectPtr *SceneBase::editMFSceneObjects   (void)
{
    editMField(SceneObjectsFieldMask, _mfSceneObjects);

    return &_mfSceneObjects;
}


//! Get the Scene::_mfObjectStore field.
const MFUnrecFieldContainerPtr *SceneBase::getMFObjectStore(void) const
{
    return &_mfObjectStore;
}

MFUnrecFieldContainerPtr *SceneBase::editMFObjectStore    (void)
{
    editMField(ObjectStoreFieldMask, _mfObjectStore);

    return &_mfObjectStore;
}

//! Get the Scene::_mfViewports field.
const MFUnrecViewportPtr *SceneBase::getMFViewports(void) const
{
    return &_mfViewports;
}

MFUnrecViewportPtr  *SceneBase::editMFViewports      (void)
{
    editMField(ViewportsFieldMask, _mfViewports);

    return &_mfViewports;
}

//! Get the Scene::_mfUIDrawingSurfaces field.
const MFUnrecUIDrawingSurfacePtr *SceneBase::getMFUIDrawingSurfaces(void) const
{
    return &_mfUIDrawingSurfaces;
}

MFUnrecUIDrawingSurfacePtr *SceneBase::editMFUIDrawingSurfaces(void)
{
    editMField(UIDrawingSurfacesFieldMask, _mfUIDrawingSurfaces);

    return &_mfUIDrawingSurfaces;
}

//! Get the Scene::_mfAnimations field.
const MFUnrecAnimationPtr *SceneBase::getMFAnimations(void) const
{
    return &_mfAnimations;
}

MFUnrecAnimationPtr *SceneBase::editMFAnimations     (void)
{
    editMField(AnimationsFieldMask, _mfAnimations);

    return &_mfAnimations;
}

//! Get the Scene::_mfInitialAnimations field.
const MFUnrecAnimationPtr *SceneBase::getMFInitialAnimations(void) const
{
    return &_mfInitialAnimations;
}

MFUnrecAnimationPtr *SceneBase::editMFInitialAnimations(void)
{
    editMField(InitialAnimationsFieldMask, _mfInitialAnimations);

    return &_mfInitialAnimations;
}

//! Get the Scene::_mfInitialParticleSystems field.
const MFUnrecParticleSystemPtr *SceneBase::getMFInitialParticleSystems(void) const
{
    return &_mfInitialParticleSystems;
}

MFUnrecParticleSystemPtr *SceneBase::editMFInitialParticleSystems(void)
{
    editMField(InitialParticleSystemsFieldMask, _mfInitialParticleSystems);

    return &_mfInitialParticleSystems;
}

SFBoostPath *SceneBase::editSFLuaModule(void)
{
    editSField(LuaModuleFieldMask);

    return &_sfLuaModule;
}

const SFBoostPath *SceneBase::getSFLuaModule(void) const
{
    return &_sfLuaModule;
}


//! Get the Scene::_sfPhysicsHandler field.
const SFUnrecPhysicsHandlerPtr *SceneBase::getSFPhysicsHandler(void) const
{
    return &_sfPhysicsHandler;
}

SFUnrecPhysicsHandlerPtr *SceneBase::editSFPhysicsHandler (void)
{
    editSField(PhysicsHandlerFieldMask);

    return &_sfPhysicsHandler;
}

//! Get the Scene::_sfPhysicsWorld field.
const SFUnrecPhysicsWorldPtr *SceneBase::getSFPhysicsWorld(void) const
{
    return &_sfPhysicsWorld;
}

SFUnrecPhysicsWorldPtr *SceneBase::editSFPhysicsWorld   (void)
{
    editSField(PhysicsWorldFieldMask);

    return &_sfPhysicsWorld;
}

SFUInt32 *SceneBase::editSFGenericMethodIDs(void)
{
    editSField(GenericMethodIDsFieldMask);

    return &_sfGenericMethodIDs;
}

const SFUInt32 *SceneBase::getSFGenericMethodIDs(void) const
{
    return &_sfGenericMethodIDs;
}




void SceneBase::pushToSceneObjects(SceneObject * const value)
{
    editMField(SceneObjectsFieldMask, _mfSceneObjects);

    _mfSceneObjects.push_back(value);
}

void SceneBase::assignSceneObjects(const MFUnrecChildSceneObjectPtr &value)
{
    MFUnrecChildSceneObjectPtr::const_iterator elemIt  =
        value.begin();
    MFUnrecChildSceneObjectPtr::const_iterator elemEnd =
        value.end  ();

    static_cast<Scene *>(this)->clearSceneObjects();

    while(elemIt != elemEnd)
    {
        this->pushToSceneObjects(*elemIt);

        ++elemIt;
    }
}

void SceneBase::removeFromSceneObjects(UInt32 uiIndex)
{
    if(uiIndex < _mfSceneObjects.size())
    {
        editMField(SceneObjectsFieldMask, _mfSceneObjects);

        _mfSceneObjects.erase(uiIndex);
    }
}

void SceneBase::removeObjFromSceneObjects(SceneObject * const value)
{
    Int32 iElemIdx = _mfSceneObjects.findIndex(value);

    if(iElemIdx != -1)
    {
        editMField(SceneObjectsFieldMask, _mfSceneObjects);

        _mfSceneObjects.erase(iElemIdx);
    }
}
void SceneBase::clearSceneObjects(void)
{
    editMField(SceneObjectsFieldMask, _mfSceneObjects);


    _mfSceneObjects.clear();
}

void SceneBase::pushToObjectStore(FieldContainer * const value)
{
    editMField(ObjectStoreFieldMask, _mfObjectStore);

    _mfObjectStore.push_back(value);
}

void SceneBase::assignObjectStore(const MFUnrecFieldContainerPtr &value)
{
    MFUnrecFieldContainerPtr::const_iterator elemIt  =
        value.begin();
    MFUnrecFieldContainerPtr::const_iterator elemEnd =
        value.end  ();

    static_cast<Scene *>(this)->clearObjectStore();

    while(elemIt != elemEnd)
    {
        this->pushToObjectStore(*elemIt);

        ++elemIt;
    }
}

void SceneBase::removeFromObjectStore(UInt32 uiIndex)
{
    if(uiIndex < _mfObjectStore.size())
    {
        editMField(ObjectStoreFieldMask, _mfObjectStore);

        _mfObjectStore.erase(uiIndex);
    }
}

void SceneBase::removeObjFromObjectStore(FieldContainer * const value)
{
    Int32 iElemIdx = _mfObjectStore.findIndex(value);

    if(iElemIdx != -1)
    {
        editMField(ObjectStoreFieldMask, _mfObjectStore);

        _mfObjectStore.erase(iElemIdx);
    }
}
void SceneBase::clearObjectStore(void)
{
    editMField(ObjectStoreFieldMask, _mfObjectStore);


    _mfObjectStore.clear();
}

void SceneBase::pushToViewports(Viewport * const value)
{
    editMField(ViewportsFieldMask, _mfViewports);

    _mfViewports.push_back(value);
}

void SceneBase::assignViewports(const MFUnrecViewportPtr &value)
{
    MFUnrecViewportPtr::const_iterator elemIt  =
        value.begin();
    MFUnrecViewportPtr::const_iterator elemEnd =
        value.end  ();

    static_cast<Scene *>(this)->clearViewports();

    while(elemIt != elemEnd)
    {
        this->pushToViewports(*elemIt);

        ++elemIt;
    }
}

void SceneBase::removeFromViewports(UInt32 uiIndex)
{
    if(uiIndex < _mfViewports.size())
    {
        editMField(ViewportsFieldMask, _mfViewports);

        _mfViewports.erase(uiIndex);
    }
}

void SceneBase::removeObjFromViewports(Viewport * const value)
{
    Int32 iElemIdx = _mfViewports.findIndex(value);

    if(iElemIdx != -1)
    {
        editMField(ViewportsFieldMask, _mfViewports);

        _mfViewports.erase(iElemIdx);
    }
}
void SceneBase::clearViewports(void)
{
    editMField(ViewportsFieldMask, _mfViewports);


    _mfViewports.clear();
}

void SceneBase::pushToUIDrawingSurfaces(UIDrawingSurface * const value)
{
    editMField(UIDrawingSurfacesFieldMask, _mfUIDrawingSurfaces);

    _mfUIDrawingSurfaces.push_back(value);
}

void SceneBase::assignUIDrawingSurfaces(const MFUnrecUIDrawingSurfacePtr &value)
{
    MFUnrecUIDrawingSurfacePtr::const_iterator elemIt  =
        value.begin();
    MFUnrecUIDrawingSurfacePtr::const_iterator elemEnd =
        value.end  ();

    static_cast<Scene *>(this)->clearUIDrawingSurfaces();

    while(elemIt != elemEnd)
    {
        this->pushToUIDrawingSurfaces(*elemIt);

        ++elemIt;
    }
}

void SceneBase::removeFromUIDrawingSurfaces(UInt32 uiIndex)
{
    if(uiIndex < _mfUIDrawingSurfaces.size())
    {
        editMField(UIDrawingSurfacesFieldMask, _mfUIDrawingSurfaces);

        _mfUIDrawingSurfaces.erase(uiIndex);
    }
}

void SceneBase::removeObjFromUIDrawingSurfaces(UIDrawingSurface * const value)
{
    Int32 iElemIdx = _mfUIDrawingSurfaces.findIndex(value);

    if(iElemIdx != -1)
    {
        editMField(UIDrawingSurfacesFieldMask, _mfUIDrawingSurfaces);

        _mfUIDrawingSurfaces.erase(iElemIdx);
    }
}
void SceneBase::clearUIDrawingSurfaces(void)
{
    editMField(UIDrawingSurfacesFieldMask, _mfUIDrawingSurfaces);


    _mfUIDrawingSurfaces.clear();
}

void SceneBase::pushToAnimations(Animation * const value)
{
    editMField(AnimationsFieldMask, _mfAnimations);

    _mfAnimations.push_back(value);
}

void SceneBase::assignAnimations(const MFUnrecAnimationPtr &value)
{
    MFUnrecAnimationPtr::const_iterator elemIt  =
        value.begin();
    MFUnrecAnimationPtr::const_iterator elemEnd =
        value.end  ();

    static_cast<Scene *>(this)->clearAnimations();

    while(elemIt != elemEnd)
    {
        this->pushToAnimations(*elemIt);

        ++elemIt;
    }
}

void SceneBase::removeFromAnimations(UInt32 uiIndex)
{
    if(uiIndex < _mfAnimations.size())
    {
        editMField(AnimationsFieldMask, _mfAnimations);

        _mfAnimations.erase(uiIndex);
    }
}

void SceneBase::removeObjFromAnimations(Animation * const value)
{
    Int32 iElemIdx = _mfAnimations.findIndex(value);

    if(iElemIdx != -1)
    {
        editMField(AnimationsFieldMask, _mfAnimations);

        _mfAnimations.erase(iElemIdx);
    }
}
void SceneBase::clearAnimations(void)
{
    editMField(AnimationsFieldMask, _mfAnimations);


    _mfAnimations.clear();
}

void SceneBase::pushToInitialAnimations(Animation * const value)
{
    editMField(InitialAnimationsFieldMask, _mfInitialAnimations);

    _mfInitialAnimations.push_back(value);
}

void SceneBase::assignInitialAnimations(const MFUnrecAnimationPtr &value)
{
    MFUnrecAnimationPtr::const_iterator elemIt  =
        value.begin();
    MFUnrecAnimationPtr::const_iterator elemEnd =
        value.end  ();

    static_cast<Scene *>(this)->clearInitialAnimations();

    while(elemIt != elemEnd)
    {
        this->pushToInitialAnimations(*elemIt);

        ++elemIt;
    }
}

void SceneBase::removeFromInitialAnimations(UInt32 uiIndex)
{
    if(uiIndex < _mfInitialAnimations.size())
    {
        editMField(InitialAnimationsFieldMask, _mfInitialAnimations);

        _mfInitialAnimations.erase(uiIndex);
    }
}

void SceneBase::removeObjFromInitialAnimations(Animation * const value)
{
    Int32 iElemIdx = _mfInitialAnimations.findIndex(value);

    if(iElemIdx != -1)
    {
        editMField(InitialAnimationsFieldMask, _mfInitialAnimations);

        _mfInitialAnimations.erase(iElemIdx);
    }
}
void SceneBase::clearInitialAnimations(void)
{
    editMField(InitialAnimationsFieldMask, _mfInitialAnimations);


    _mfInitialAnimations.clear();
}

void SceneBase::pushToInitialParticleSystems(ParticleSystem * const value)
{
    editMField(InitialParticleSystemsFieldMask, _mfInitialParticleSystems);

    _mfInitialParticleSystems.push_back(value);
}

void SceneBase::assignInitialParticleSystems(const MFUnrecParticleSystemPtr &value)
{
    MFUnrecParticleSystemPtr::const_iterator elemIt  =
        value.begin();
    MFUnrecParticleSystemPtr::const_iterator elemEnd =
        value.end  ();

    static_cast<Scene *>(this)->clearInitialParticleSystems();

    while(elemIt != elemEnd)
    {
        this->pushToInitialParticleSystems(*elemIt);

        ++elemIt;
    }
}

void SceneBase::removeFromInitialParticleSystems(UInt32 uiIndex)
{
    if(uiIndex < _mfInitialParticleSystems.size())
    {
        editMField(InitialParticleSystemsFieldMask, _mfInitialParticleSystems);

        _mfInitialParticleSystems.erase(uiIndex);
    }
}

void SceneBase::removeObjFromInitialParticleSystems(ParticleSystem * const value)
{
    Int32 iElemIdx = _mfInitialParticleSystems.findIndex(value);

    if(iElemIdx != -1)
    {
        editMField(InitialParticleSystemsFieldMask, _mfInitialParticleSystems);

        _mfInitialParticleSystems.erase(iElemIdx);
    }
}
void SceneBase::clearInitialParticleSystems(void)
{
    editMField(InitialParticleSystemsFieldMask, _mfInitialParticleSystems);


    _mfInitialParticleSystems.clear();
}



/*------------------------------ access -----------------------------------*/

UInt32 SceneBase::getBinSize(ConstFieldMaskArg whichField)
{
    UInt32 returnValue = Inherited::getBinSize(whichField);

    if(FieldBits::NoField != (SceneObjectsFieldMask & whichField))
    {
        returnValue += _mfSceneObjects.getBinSize();
    }
    if(FieldBits::NoField != (ParentProjectFieldMask & whichField))
    {
        returnValue += _sfParentProject.getBinSize();
    }
    if(FieldBits::NoField != (ObjectStoreFieldMask & whichField))
    {
        returnValue += _mfObjectStore.getBinSize();
    }
    if(FieldBits::NoField != (ViewportsFieldMask & whichField))
    {
        returnValue += _mfViewports.getBinSize();
    }
    if(FieldBits::NoField != (UIDrawingSurfacesFieldMask & whichField))
    {
        returnValue += _mfUIDrawingSurfaces.getBinSize();
    }
    if(FieldBits::NoField != (AnimationsFieldMask & whichField))
    {
        returnValue += _mfAnimations.getBinSize();
    }
    if(FieldBits::NoField != (InitialAnimationsFieldMask & whichField))
    {
        returnValue += _mfInitialAnimations.getBinSize();
    }
    if(FieldBits::NoField != (InitialParticleSystemsFieldMask & whichField))
    {
        returnValue += _mfInitialParticleSystems.getBinSize();
    }
    if(FieldBits::NoField != (LuaModuleFieldMask & whichField))
    {
        returnValue += _sfLuaModule.getBinSize();
    }
    if(FieldBits::NoField != (PhysicsHandlerFieldMask & whichField))
    {
        returnValue += _sfPhysicsHandler.getBinSize();
    }
    if(FieldBits::NoField != (PhysicsWorldFieldMask & whichField))
    {
        returnValue += _sfPhysicsWorld.getBinSize();
    }
    if(FieldBits::NoField != (GenericMethodIDsFieldMask & whichField))
    {
        returnValue += _sfGenericMethodIDs.getBinSize();
    }

    return returnValue;
}

void SceneBase::copyToBin(BinaryDataHandler &pMem,
                                  ConstFieldMaskArg  whichField)
{
    Inherited::copyToBin(pMem, whichField);

    if(FieldBits::NoField != (SceneObjectsFieldMask & whichField))
    {
        _mfSceneObjects.copyToBin(pMem);
    }
    if(FieldBits::NoField != (ParentProjectFieldMask & whichField))
    {
        _sfParentProject.copyToBin(pMem);
    }
    if(FieldBits::NoField != (ObjectStoreFieldMask & whichField))
    {
        _mfObjectStore.copyToBin(pMem);
    }
    if(FieldBits::NoField != (ViewportsFieldMask & whichField))
    {
        _mfViewports.copyToBin(pMem);
    }
    if(FieldBits::NoField != (UIDrawingSurfacesFieldMask & whichField))
    {
        _mfUIDrawingSurfaces.copyToBin(pMem);
    }
    if(FieldBits::NoField != (AnimationsFieldMask & whichField))
    {
        _mfAnimations.copyToBin(pMem);
    }
    if(FieldBits::NoField != (InitialAnimationsFieldMask & whichField))
    {
        _mfInitialAnimations.copyToBin(pMem);
    }
    if(FieldBits::NoField != (InitialParticleSystemsFieldMask & whichField))
    {
        _mfInitialParticleSystems.copyToBin(pMem);
    }
    if(FieldBits::NoField != (LuaModuleFieldMask & whichField))
    {
        _sfLuaModule.copyToBin(pMem);
    }
    if(FieldBits::NoField != (PhysicsHandlerFieldMask & whichField))
    {
        _sfPhysicsHandler.copyToBin(pMem);
    }
    if(FieldBits::NoField != (PhysicsWorldFieldMask & whichField))
    {
        _sfPhysicsWorld.copyToBin(pMem);
    }
    if(FieldBits::NoField != (GenericMethodIDsFieldMask & whichField))
    {
        _sfGenericMethodIDs.copyToBin(pMem);
    }
}

void SceneBase::copyFromBin(BinaryDataHandler &pMem,
                                    ConstFieldMaskArg  whichField)
{
    Inherited::copyFromBin(pMem, whichField);

    if(FieldBits::NoField != (SceneObjectsFieldMask & whichField))
    {
        _mfSceneObjects.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (ParentProjectFieldMask & whichField))
    {
        _sfParentProject.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (ObjectStoreFieldMask & whichField))
    {
        _mfObjectStore.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (ViewportsFieldMask & whichField))
    {
        _mfViewports.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (UIDrawingSurfacesFieldMask & whichField))
    {
        _mfUIDrawingSurfaces.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (AnimationsFieldMask & whichField))
    {
        _mfAnimations.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (InitialAnimationsFieldMask & whichField))
    {
        _mfInitialAnimations.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (InitialParticleSystemsFieldMask & whichField))
    {
        _mfInitialParticleSystems.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (LuaModuleFieldMask & whichField))
    {
        _sfLuaModule.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (PhysicsHandlerFieldMask & whichField))
    {
        _sfPhysicsHandler.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (PhysicsWorldFieldMask & whichField))
    {
        _sfPhysicsWorld.copyFromBin(pMem);
    }
    if(FieldBits::NoField != (GenericMethodIDsFieldMask & whichField))
    {
        _sfGenericMethodIDs.copyFromBin(pMem);
    }
}

//! create a new instance of the class
SceneTransitPtr SceneBase::createLocal(BitVector bFlags)
{
    SceneTransitPtr fc;

    if(getClassType().getPrototype() != NULL)
    {
        FieldContainerTransitPtr tmpPtr =
            getClassType().getPrototype()-> shallowCopyLocal(bFlags);

        fc = dynamic_pointer_cast<Scene>(tmpPtr);
    }

    return fc;
}

//! create a new instance of the class, copy the container flags
SceneTransitPtr SceneBase::createDependent(BitVector bFlags)
{
    SceneTransitPtr fc;

    if(getClassType().getPrototype() != NULL)
    {
        FieldContainerTransitPtr tmpPtr =
            getClassType().getPrototype()-> shallowCopyDependent(bFlags);

        fc = dynamic_pointer_cast<Scene>(tmpPtr);
    }

    return fc;
}

//! create a new instance of the class
SceneTransitPtr SceneBase::create(void)
{
    SceneTransitPtr fc;

    if(getClassType().getPrototype() != NULL)
    {
        FieldContainerTransitPtr tmpPtr =
            getClassType().getPrototype()-> shallowCopy();

        fc = dynamic_pointer_cast<Scene>(tmpPtr);
    }

    return fc;
}

Scene *SceneBase::createEmptyLocal(BitVector bFlags)
{
    Scene *returnValue;

    newPtr<Scene>(returnValue, bFlags);

    returnValue->_pFieldFlags->_bNamespaceMask &= ~bFlags;

    return returnValue;
}

//! create an empty new instance of the class, do not copy the prototype
Scene *SceneBase::createEmpty(void)
{
    Scene *returnValue;

    newPtr<Scene>(returnValue, Thread::getCurrentLocalFlags());

    returnValue->_pFieldFlags->_bNamespaceMask &=
        ~Thread::getCurrentLocalFlags();

    return returnValue;
}


FieldContainerTransitPtr SceneBase::shallowCopyLocal(
    BitVector bFlags) const
{
    Scene *tmpPtr;

    newPtr(tmpPtr, dynamic_cast<const Scene *>(this), bFlags);

    FieldContainerTransitPtr returnValue(tmpPtr);

    tmpPtr->_pFieldFlags->_bNamespaceMask &= ~bFlags;

    return returnValue;
}

FieldContainerTransitPtr SceneBase::shallowCopyDependent(
    BitVector bFlags) const
{
    Scene *tmpPtr;

    newPtr(tmpPtr, dynamic_cast<const Scene *>(this), ~bFlags);

    FieldContainerTransitPtr returnValue(tmpPtr);

    tmpPtr->_pFieldFlags->_bNamespaceMask = bFlags;

    return returnValue;
}

FieldContainerTransitPtr SceneBase::shallowCopy(void) const
{
    Scene *tmpPtr;

    newPtr(tmpPtr,
           dynamic_cast<const Scene *>(this),
           Thread::getCurrentLocalFlags());

    tmpPtr->_pFieldFlags->_bNamespaceMask &= ~Thread::getCurrentLocalFlags();

    FieldContainerTransitPtr returnValue(tmpPtr);

    return returnValue;
}



/*------------------------- event producers ----------------------------------*/
void SceneBase::produceEvent(UInt32 eventId, EventDetails* const e)
{
    switch(eventId)
    {
    case SceneEnteredEventId:
        OSG_ASSERT(dynamic_cast<SceneEnteredEventDetailsType* const>(e));

        _SceneEnteredEvent.set_combiner(ConsumableEventCombiner(e));
        _SceneEnteredEvent(dynamic_cast<SceneEnteredEventDetailsType* const>(e), SceneEnteredEventId);
        break;
    case SceneExitedEventId:
        OSG_ASSERT(dynamic_cast<SceneExitedEventDetailsType* const>(e));

        _SceneExitedEvent.set_combiner(ConsumableEventCombiner(e));
        _SceneExitedEvent(dynamic_cast<SceneExitedEventDetailsType* const>(e), SceneExitedEventId);
        break;
    case SceneStartedEventId:
        OSG_ASSERT(dynamic_cast<SceneStartedEventDetailsType* const>(e));

        _SceneStartedEvent.set_combiner(ConsumableEventCombiner(e));
        _SceneStartedEvent(dynamic_cast<SceneStartedEventDetailsType* const>(e), SceneStartedEventId);
        break;
    case SceneEndedEventId:
        OSG_ASSERT(dynamic_cast<SceneEndedEventDetailsType* const>(e));

        _SceneEndedEvent.set_combiner(ConsumableEventCombiner(e));
        _SceneEndedEvent(dynamic_cast<SceneEndedEventDetailsType* const>(e), SceneEndedEventId);
        break;
    case SceneResetEventId:
        OSG_ASSERT(dynamic_cast<SceneResetEventDetailsType* const>(e));

        _SceneResetEvent.set_combiner(ConsumableEventCombiner(e));
        _SceneResetEvent(dynamic_cast<SceneResetEventDetailsType* const>(e), SceneResetEventId);
        break;
    case WindowOpenedEventId:
        OSG_ASSERT(dynamic_cast<WindowOpenedEventDetailsType* const>(e));

        _WindowOpenedEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowOpenedEvent(dynamic_cast<WindowOpenedEventDetailsType* const>(e), WindowOpenedEventId);
        break;
    case WindowClosingEventId:
        OSG_ASSERT(dynamic_cast<WindowClosingEventDetailsType* const>(e));

        _WindowClosingEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowClosingEvent(dynamic_cast<WindowClosingEventDetailsType* const>(e), WindowClosingEventId);
        break;
    case WindowClosedEventId:
        OSG_ASSERT(dynamic_cast<WindowClosedEventDetailsType* const>(e));

        _WindowClosedEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowClosedEvent(dynamic_cast<WindowClosedEventDetailsType* const>(e), WindowClosedEventId);
        break;
    case WindowIconifiedEventId:
        OSG_ASSERT(dynamic_cast<WindowIconifiedEventDetailsType* const>(e));

        _WindowIconifiedEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowIconifiedEvent(dynamic_cast<WindowIconifiedEventDetailsType* const>(e), WindowIconifiedEventId);
        break;
    case WindowDeiconifiedEventId:
        OSG_ASSERT(dynamic_cast<WindowDeiconifiedEventDetailsType* const>(e));

        _WindowDeiconifiedEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowDeiconifiedEvent(dynamic_cast<WindowDeiconifiedEventDetailsType* const>(e), WindowDeiconifiedEventId);
        break;
    case WindowActivatedEventId:
        OSG_ASSERT(dynamic_cast<WindowActivatedEventDetailsType* const>(e));

        _WindowActivatedEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowActivatedEvent(dynamic_cast<WindowActivatedEventDetailsType* const>(e), WindowActivatedEventId);
        break;
    case WindowDeactivatedEventId:
        OSG_ASSERT(dynamic_cast<WindowDeactivatedEventDetailsType* const>(e));

        _WindowDeactivatedEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowDeactivatedEvent(dynamic_cast<WindowDeactivatedEventDetailsType* const>(e), WindowDeactivatedEventId);
        break;
    case WindowEnteredEventId:
        OSG_ASSERT(dynamic_cast<WindowEnteredEventDetailsType* const>(e));

        _WindowEnteredEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowEnteredEvent(dynamic_cast<WindowEnteredEventDetailsType* const>(e), WindowEnteredEventId);
        break;
    case WindowExitedEventId:
        OSG_ASSERT(dynamic_cast<WindowExitedEventDetailsType* const>(e));

        _WindowExitedEvent.set_combiner(ConsumableEventCombiner(e));
        _WindowExitedEvent(dynamic_cast<WindowExitedEventDetailsType* const>(e), WindowExitedEventId);
        break;
    case MouseClickedEventId:
        OSG_ASSERT(dynamic_cast<MouseClickedEventDetailsType* const>(e));

        _MouseClickedEvent.set_combiner(ConsumableEventCombiner(e));
        _MouseClickedEvent(dynamic_cast<MouseClickedEventDetailsType* const>(e), MouseClickedEventId);
        break;
    case MouseEnteredEventId:
        OSG_ASSERT(dynamic_cast<MouseEnteredEventDetailsType* const>(e));

        _MouseEnteredEvent.set_combiner(ConsumableEventCombiner(e));
        _MouseEnteredEvent(dynamic_cast<MouseEnteredEventDetailsType* const>(e), MouseEnteredEventId);
        break;
    case MouseExitedEventId:
        OSG_ASSERT(dynamic_cast<MouseExitedEventDetailsType* const>(e));

        _MouseExitedEvent.set_combiner(ConsumableEventCombiner(e));
        _MouseExitedEvent(dynamic_cast<MouseExitedEventDetailsType* const>(e), MouseExitedEventId);
        break;
    case MousePressedEventId:
        OSG_ASSERT(dynamic_cast<MousePressedEventDetailsType* const>(e));

        _MousePressedEvent.set_combiner(ConsumableEventCombiner(e));
        _MousePressedEvent(dynamic_cast<MousePressedEventDetailsType* const>(e), MousePressedEventId);
        break;
    case MouseReleasedEventId:
        OSG_ASSERT(dynamic_cast<MouseReleasedEventDetailsType* const>(e));

        _MouseReleasedEvent.set_combiner(ConsumableEventCombiner(e));
        _MouseReleasedEvent(dynamic_cast<MouseReleasedEventDetailsType* const>(e), MouseReleasedEventId);
        break;
    case MouseMovedEventId:
        OSG_ASSERT(dynamic_cast<MouseMovedEventDetailsType* const>(e));

        _MouseMovedEvent.set_combiner(ConsumableEventCombiner(e));
        _MouseMovedEvent(dynamic_cast<MouseMovedEventDetailsType* const>(e), MouseMovedEventId);
        break;
    case MouseDraggedEventId:
        OSG_ASSERT(dynamic_cast<MouseDraggedEventDetailsType* const>(e));

        _MouseDraggedEvent.set_combiner(ConsumableEventCombiner(e));
        _MouseDraggedEvent(dynamic_cast<MouseDraggedEventDetailsType* const>(e), MouseDraggedEventId);
        break;
    case MouseWheelMovedEventId:
        OSG_ASSERT(dynamic_cast<MouseWheelMovedEventDetailsType* const>(e));

        _MouseWheelMovedEvent.set_combiner(ConsumableEventCombiner(e));
        _MouseWheelMovedEvent(dynamic_cast<MouseWheelMovedEventDetailsType* const>(e), MouseWheelMovedEventId);
        break;
    case KeyPressedEventId:
        OSG_ASSERT(dynamic_cast<KeyPressedEventDetailsType* const>(e));

        _KeyPressedEvent.set_combiner(ConsumableEventCombiner(e));
        _KeyPressedEvent(dynamic_cast<KeyPressedEventDetailsType* const>(e), KeyPressedEventId);
        break;
    case KeyReleasedEventId:
        OSG_ASSERT(dynamic_cast<KeyReleasedEventDetailsType* const>(e));

        _KeyReleasedEvent.set_combiner(ConsumableEventCombiner(e));
        _KeyReleasedEvent(dynamic_cast<KeyReleasedEventDetailsType* const>(e), KeyReleasedEventId);
        break;
    case KeyTypedEventId:
        OSG_ASSERT(dynamic_cast<KeyTypedEventDetailsType* const>(e));

        _KeyTypedEvent.set_combiner(ConsumableEventCombiner(e));
        _KeyTypedEvent(dynamic_cast<KeyTypedEventDetailsType* const>(e), KeyTypedEventId);
        break;
    case UpdateEventId:
        OSG_ASSERT(dynamic_cast<UpdateEventDetailsType* const>(e));

        _UpdateEvent.set_combiner(ConsumableEventCombiner(e));
        _UpdateEvent(dynamic_cast<UpdateEventDetailsType* const>(e), UpdateEventId);
        break;
    default:
        SWARNING << "No event defined with that ID";
        break;
    }
}

boost::signals2::connection SceneBase::connectEvent(UInt32 eventId, 
                                                             const BaseEventType::slot_type &listener, 
                                                             boost::signals2::connect_position at)
{
    switch(eventId)
    {
    case SceneEnteredEventId:
        return _SceneEnteredEvent.connect(listener, at);
        break;
    case SceneExitedEventId:
        return _SceneExitedEvent.connect(listener, at);
        break;
    case SceneStartedEventId:
        return _SceneStartedEvent.connect(listener, at);
        break;
    case SceneEndedEventId:
        return _SceneEndedEvent.connect(listener, at);
        break;
    case SceneResetEventId:
        return _SceneResetEvent.connect(listener, at);
        break;
    case WindowOpenedEventId:
        return _WindowOpenedEvent.connect(listener, at);
        break;
    case WindowClosingEventId:
        return _WindowClosingEvent.connect(listener, at);
        break;
    case WindowClosedEventId:
        return _WindowClosedEvent.connect(listener, at);
        break;
    case WindowIconifiedEventId:
        return _WindowIconifiedEvent.connect(listener, at);
        break;
    case WindowDeiconifiedEventId:
        return _WindowDeiconifiedEvent.connect(listener, at);
        break;
    case WindowActivatedEventId:
        return _WindowActivatedEvent.connect(listener, at);
        break;
    case WindowDeactivatedEventId:
        return _WindowDeactivatedEvent.connect(listener, at);
        break;
    case WindowEnteredEventId:
        return _WindowEnteredEvent.connect(listener, at);
        break;
    case WindowExitedEventId:
        return _WindowExitedEvent.connect(listener, at);
        break;
    case MouseClickedEventId:
        return _MouseClickedEvent.connect(listener, at);
        break;
    case MouseEnteredEventId:
        return _MouseEnteredEvent.connect(listener, at);
        break;
    case MouseExitedEventId:
        return _MouseExitedEvent.connect(listener, at);
        break;
    case MousePressedEventId:
        return _MousePressedEvent.connect(listener, at);
        break;
    case MouseReleasedEventId:
        return _MouseReleasedEvent.connect(listener, at);
        break;
    case MouseMovedEventId:
        return _MouseMovedEvent.connect(listener, at);
        break;
    case MouseDraggedEventId:
        return _MouseDraggedEvent.connect(listener, at);
        break;
    case MouseWheelMovedEventId:
        return _MouseWheelMovedEvent.connect(listener, at);
        break;
    case KeyPressedEventId:
        return _KeyPressedEvent.connect(listener, at);
        break;
    case KeyReleasedEventId:
        return _KeyReleasedEvent.connect(listener, at);
        break;
    case KeyTypedEventId:
        return _KeyTypedEvent.connect(listener, at);
        break;
    case UpdateEventId:
        return _UpdateEvent.connect(listener, at);
        break;
    default:
        SWARNING << "No event defined with that ID";
        return boost::signals2::connection();
        break;
    }

    return boost::signals2::connection();
}

boost::signals2::connection  SceneBase::connectEvent(UInt32 eventId, 
                                                              const BaseEventType::group_type &group,
                                                              const BaseEventType::slot_type &listener,
                                                              boost::signals2::connect_position at)
{
    switch(eventId)
    {
    case SceneEnteredEventId:
        return _SceneEnteredEvent.connect(group, listener, at);
        break;
    case SceneExitedEventId:
        return _SceneExitedEvent.connect(group, listener, at);
        break;
    case SceneStartedEventId:
        return _SceneStartedEvent.connect(group, listener, at);
        break;
    case SceneEndedEventId:
        return _SceneEndedEvent.connect(group, listener, at);
        break;
    case SceneResetEventId:
        return _SceneResetEvent.connect(group, listener, at);
        break;
    case WindowOpenedEventId:
        return _WindowOpenedEvent.connect(group, listener, at);
        break;
    case WindowClosingEventId:
        return _WindowClosingEvent.connect(group, listener, at);
        break;
    case WindowClosedEventId:
        return _WindowClosedEvent.connect(group, listener, at);
        break;
    case WindowIconifiedEventId:
        return _WindowIconifiedEvent.connect(group, listener, at);
        break;
    case WindowDeiconifiedEventId:
        return _WindowDeiconifiedEvent.connect(group, listener, at);
        break;
    case WindowActivatedEventId:
        return _WindowActivatedEvent.connect(group, listener, at);
        break;
    case WindowDeactivatedEventId:
        return _WindowDeactivatedEvent.connect(group, listener, at);
        break;
    case WindowEnteredEventId:
        return _WindowEnteredEvent.connect(group, listener, at);
        break;
    case WindowExitedEventId:
        return _WindowExitedEvent.connect(group, listener, at);
        break;
    case MouseClickedEventId:
        return _MouseClickedEvent.connect(group, listener, at);
        break;
    case MouseEnteredEventId:
        return _MouseEnteredEvent.connect(group, listener, at);
        break;
    case MouseExitedEventId:
        return _MouseExitedEvent.connect(group, listener, at);
        break;
    case MousePressedEventId:
        return _MousePressedEvent.connect(group, listener, at);
        break;
    case MouseReleasedEventId:
        return _MouseReleasedEvent.connect(group, listener, at);
        break;
    case MouseMovedEventId:
        return _MouseMovedEvent.connect(group, listener, at);
        break;
    case MouseDraggedEventId:
        return _MouseDraggedEvent.connect(group, listener, at);
        break;
    case MouseWheelMovedEventId:
        return _MouseWheelMovedEvent.connect(group, listener, at);
        break;
    case KeyPressedEventId:
        return _KeyPressedEvent.connect(group, listener, at);
        break;
    case KeyReleasedEventId:
        return _KeyReleasedEvent.connect(group, listener, at);
        break;
    case KeyTypedEventId:
        return _KeyTypedEvent.connect(group, listener, at);
        break;
    case UpdateEventId:
        return _UpdateEvent.connect(group, listener, at);
        break;
    default:
        SWARNING << "No event defined with that ID";
        return boost::signals2::connection();
        break;
    }

    return boost::signals2::connection();
}
    
void  SceneBase::disconnectEvent(UInt32 eventId, const BaseEventType::group_type &group)
{
    switch(eventId)
    {
    case SceneEnteredEventId:
        _SceneEnteredEvent.disconnect(group);
        break;
    case SceneExitedEventId:
        _SceneExitedEvent.disconnect(group);
        break;
    case SceneStartedEventId:
        _SceneStartedEvent.disconnect(group);
        break;
    case SceneEndedEventId:
        _SceneEndedEvent.disconnect(group);
        break;
    case SceneResetEventId:
        _SceneResetEvent.disconnect(group);
        break;
    case WindowOpenedEventId:
        _WindowOpenedEvent.disconnect(group);
        break;
    case WindowClosingEventId:
        _WindowClosingEvent.disconnect(group);
        break;
    case WindowClosedEventId:
        _WindowClosedEvent.disconnect(group);
        break;
    case WindowIconifiedEventId:
        _WindowIconifiedEvent.disconnect(group);
        break;
    case WindowDeiconifiedEventId:
        _WindowDeiconifiedEvent.disconnect(group);
        break;
    case WindowActivatedEventId:
        _WindowActivatedEvent.disconnect(group);
        break;
    case WindowDeactivatedEventId:
        _WindowDeactivatedEvent.disconnect(group);
        break;
    case WindowEnteredEventId:
        _WindowEnteredEvent.disconnect(group);
        break;
    case WindowExitedEventId:
        _WindowExitedEvent.disconnect(group);
        break;
    case MouseClickedEventId:
        _MouseClickedEvent.disconnect(group);
        break;
    case MouseEnteredEventId:
        _MouseEnteredEvent.disconnect(group);
        break;
    case MouseExitedEventId:
        _MouseExitedEvent.disconnect(group);
        break;
    case MousePressedEventId:
        _MousePressedEvent.disconnect(group);
        break;
    case MouseReleasedEventId:
        _MouseReleasedEvent.disconnect(group);
        break;
    case MouseMovedEventId:
        _MouseMovedEvent.disconnect(group);
        break;
    case MouseDraggedEventId:
        _MouseDraggedEvent.disconnect(group);
        break;
    case MouseWheelMovedEventId:
        _MouseWheelMovedEvent.disconnect(group);
        break;
    case KeyPressedEventId:
        _KeyPressedEvent.disconnect(group);
        break;
    case KeyReleasedEventId:
        _KeyReleasedEvent.disconnect(group);
        break;
    case KeyTypedEventId:
        _KeyTypedEvent.disconnect(group);
        break;
    case UpdateEventId:
        _UpdateEvent.disconnect(group);
        break;
    default:
        SWARNING << "No event defined with that ID";
        break;
    }
}

void  SceneBase::disconnectAllSlotsEvent(UInt32 eventId)
{
    switch(eventId)
    {
    case SceneEnteredEventId:
        _SceneEnteredEvent.disconnect_all_slots();
        break;
    case SceneExitedEventId:
        _SceneExitedEvent.disconnect_all_slots();
        break;
    case SceneStartedEventId:
        _SceneStartedEvent.disconnect_all_slots();
        break;
    case SceneEndedEventId:
        _SceneEndedEvent.disconnect_all_slots();
        break;
    case SceneResetEventId:
        _SceneResetEvent.disconnect_all_slots();
        break;
    case WindowOpenedEventId:
        _WindowOpenedEvent.disconnect_all_slots();
        break;
    case WindowClosingEventId:
        _WindowClosingEvent.disconnect_all_slots();
        break;
    case WindowClosedEventId:
        _WindowClosedEvent.disconnect_all_slots();
        break;
    case WindowIconifiedEventId:
        _WindowIconifiedEvent.disconnect_all_slots();
        break;
    case WindowDeiconifiedEventId:
        _WindowDeiconifiedEvent.disconnect_all_slots();
        break;
    case WindowActivatedEventId:
        _WindowActivatedEvent.disconnect_all_slots();
        break;
    case WindowDeactivatedEventId:
        _WindowDeactivatedEvent.disconnect_all_slots();
        break;
    case WindowEnteredEventId:
        _WindowEnteredEvent.disconnect_all_slots();
        break;
    case WindowExitedEventId:
        _WindowExitedEvent.disconnect_all_slots();
        break;
    case MouseClickedEventId:
        _MouseClickedEvent.disconnect_all_slots();
        break;
    case MouseEnteredEventId:
        _MouseEnteredEvent.disconnect_all_slots();
        break;
    case MouseExitedEventId:
        _MouseExitedEvent.disconnect_all_slots();
        break;
    case MousePressedEventId:
        _MousePressedEvent.disconnect_all_slots();
        break;
    case MouseReleasedEventId:
        _MouseReleasedEvent.disconnect_all_slots();
        break;
    case MouseMovedEventId:
        _MouseMovedEvent.disconnect_all_slots();
        break;
    case MouseDraggedEventId:
        _MouseDraggedEvent.disconnect_all_slots();
        break;
    case MouseWheelMovedEventId:
        _MouseWheelMovedEvent.disconnect_all_slots();
        break;
    case KeyPressedEventId:
        _KeyPressedEvent.disconnect_all_slots();
        break;
    case KeyReleasedEventId:
        _KeyReleasedEvent.disconnect_all_slots();
        break;
    case KeyTypedEventId:
        _KeyTypedEvent.disconnect_all_slots();
        break;
    case UpdateEventId:
        _UpdateEvent.disconnect_all_slots();
        break;
    default:
        SWARNING << "No event defined with that ID";
        break;
    }
}

bool  SceneBase::isEmptyEvent(UInt32 eventId) const
{
    switch(eventId)
    {
    case SceneEnteredEventId:
        return _SceneEnteredEvent.empty();
        break;
    case SceneExitedEventId:
        return _SceneExitedEvent.empty();
        break;
    case SceneStartedEventId:
        return _SceneStartedEvent.empty();
        break;
    case SceneEndedEventId:
        return _SceneEndedEvent.empty();
        break;
    case SceneResetEventId:
        return _SceneResetEvent.empty();
        break;
    case WindowOpenedEventId:
        return _WindowOpenedEvent.empty();
        break;
    case WindowClosingEventId:
        return _WindowClosingEvent.empty();
        break;
    case WindowClosedEventId:
        return _WindowClosedEvent.empty();
        break;
    case WindowIconifiedEventId:
        return _WindowIconifiedEvent.empty();
        break;
    case WindowDeiconifiedEventId:
        return _WindowDeiconifiedEvent.empty();
        break;
    case WindowActivatedEventId:
        return _WindowActivatedEvent.empty();
        break;
    case WindowDeactivatedEventId:
        return _WindowDeactivatedEvent.empty();
        break;
    case WindowEnteredEventId:
        return _WindowEnteredEvent.empty();
        break;
    case WindowExitedEventId:
        return _WindowExitedEvent.empty();
        break;
    case MouseClickedEventId:
        return _MouseClickedEvent.empty();
        break;
    case MouseEnteredEventId:
        return _MouseEnteredEvent.empty();
        break;
    case MouseExitedEventId:
        return _MouseExitedEvent.empty();
        break;
    case MousePressedEventId:
        return _MousePressedEvent.empty();
        break;
    case MouseReleasedEventId:
        return _MouseReleasedEvent.empty();
        break;
    case MouseMovedEventId:
        return _MouseMovedEvent.empty();
        break;
    case MouseDraggedEventId:
        return _MouseDraggedEvent.empty();
        break;
    case MouseWheelMovedEventId:
        return _MouseWheelMovedEvent.empty();
        break;
    case KeyPressedEventId:
        return _KeyPressedEvent.empty();
        break;
    case KeyReleasedEventId:
        return _KeyReleasedEvent.empty();
        break;
    case KeyTypedEventId:
        return _KeyTypedEvent.empty();
        break;
    case UpdateEventId:
        return _UpdateEvent.empty();
        break;
    default:
        SWARNING << "No event defined with that ID";
        return true;
        break;
    }
}

UInt32  SceneBase::numSlotsEvent(UInt32 eventId) const
{
    switch(eventId)
    {
    case SceneEnteredEventId:
        return _SceneEnteredEvent.num_slots();
        break;
    case SceneExitedEventId:
        return _SceneExitedEvent.num_slots();
        break;
    case SceneStartedEventId:
        return _SceneStartedEvent.num_slots();
        break;
    case SceneEndedEventId:
        return _SceneEndedEvent.num_slots();
        break;
    case SceneResetEventId:
        return _SceneResetEvent.num_slots();
        break;
    case WindowOpenedEventId:
        return _WindowOpenedEvent.num_slots();
        break;
    case WindowClosingEventId:
        return _WindowClosingEvent.num_slots();
        break;
    case WindowClosedEventId:
        return _WindowClosedEvent.num_slots();
        break;
    case WindowIconifiedEventId:
        return _WindowIconifiedEvent.num_slots();
        break;
    case WindowDeiconifiedEventId:
        return _WindowDeiconifiedEvent.num_slots();
        break;
    case WindowActivatedEventId:
        return _WindowActivatedEvent.num_slots();
        break;
    case WindowDeactivatedEventId:
        return _WindowDeactivatedEvent.num_slots();
        break;
    case WindowEnteredEventId:
        return _WindowEnteredEvent.num_slots();
        break;
    case WindowExitedEventId:
        return _WindowExitedEvent.num_slots();
        break;
    case MouseClickedEventId:
        return _MouseClickedEvent.num_slots();
        break;
    case MouseEnteredEventId:
        return _MouseEnteredEvent.num_slots();
        break;
    case MouseExitedEventId:
        return _MouseExitedEvent.num_slots();
        break;
    case MousePressedEventId:
        return _MousePressedEvent.num_slots();
        break;
    case MouseReleasedEventId:
        return _MouseReleasedEvent.num_slots();
        break;
    case MouseMovedEventId:
        return _MouseMovedEvent.num_slots();
        break;
    case MouseDraggedEventId:
        return _MouseDraggedEvent.num_slots();
        break;
    case MouseWheelMovedEventId:
        return _MouseWheelMovedEvent.num_slots();
        break;
    case KeyPressedEventId:
        return _KeyPressedEvent.num_slots();
        break;
    case KeyReleasedEventId:
        return _KeyReleasedEvent.num_slots();
        break;
    case KeyTypedEventId:
        return _KeyTypedEvent.num_slots();
        break;
    case UpdateEventId:
        return _UpdateEvent.num_slots();
        break;
    default:
        SWARNING << "No event defined with that ID";
        return 0;
        break;
    }
}


/*------------------------- constructors ----------------------------------*/

SceneBase::SceneBase(void) :
    Inherited(),
    _mfSceneObjects           (this,
                          SceneObjectsFieldId,
                          SceneObject::ParentSceneFieldId),
    _sfParentProject          (NULL),
    _mfObjectStore            (),
    _mfViewports              (),
    _mfUIDrawingSurfaces      (),
    _mfAnimations             (),
    _mfInitialAnimations      (),
    _mfInitialParticleSystems (),
    _sfLuaModule              (),
    _sfPhysicsHandler         (NULL),
    _sfPhysicsWorld           (NULL),
    _sfGenericMethodIDs       ()
{
}

SceneBase::SceneBase(const SceneBase &source) :
    Inherited(source),
    _mfSceneObjects           (this,
                          SceneObjectsFieldId,
                          SceneObject::ParentSceneFieldId),
    _sfParentProject          (NULL),
    _mfObjectStore            (),
    _mfViewports              (),
    _mfUIDrawingSurfaces      (),
    _mfAnimations             (),
    _mfInitialAnimations      (),
    _mfInitialParticleSystems (),
    _sfLuaModule              (source._sfLuaModule              ),
    _sfPhysicsHandler         (NULL),
    _sfPhysicsWorld           (NULL),
    _sfGenericMethodIDs       (source._sfGenericMethodIDs       )
{
}


/*-------------------------- destructors ----------------------------------*/

SceneBase::~SceneBase(void)
{
}
/*-------------------------------------------------------------------------*/
/* Parent linking                                                          */

bool SceneBase::linkParent(
    FieldContainer * const pParent,
    UInt16           const childFieldId,
    UInt16           const parentFieldId )
{
    if(parentFieldId == ParentProjectFieldId)
    {
        FieldContainer * pTypedParent =
            dynamic_cast< FieldContainer * >(pParent);

        if(pTypedParent != NULL)
        {
            FieldContainer *pOldParent =
                _sfParentProject.getValue         ();

            UInt16 oldChildFieldId =
                _sfParentProject.getParentFieldPos();

            if(pOldParent != NULL)
            {
                pOldParent->unlinkChild(this, oldChildFieldId);
            }

            editSField(ParentProjectFieldMask);

            _sfParentProject.setValue(static_cast<FieldContainer *>(pParent), childFieldId);

            return true;
        }

        return false;
    }

    return Inherited::linkParent(pParent, childFieldId, parentFieldId);
}

bool SceneBase::unlinkParent(
    FieldContainer * const pParent,
    UInt16           const parentFieldId)
{
    if(parentFieldId == ParentProjectFieldId)
    {
        FieldContainer * pTypedParent =
            dynamic_cast< FieldContainer * >(pParent);

        if(pTypedParent != NULL)
        {
            if(_sfParentProject.getValue() == pParent)
            {
                editSField(ParentProjectFieldMask);

                _sfParentProject.setValue(NULL, 0xFFFF);

                return true;
            }

            FWARNING(("SceneBase::unlinkParent: "
                      "Child <-> Parent link inconsistent.\n"));

            return false;
        }

        return false;
    }

    return Inherited::unlinkParent(pParent, parentFieldId);
}


/*-------------------------------------------------------------------------*/
/* Child linking                                                           */

bool SceneBase::unlinkChild(
    FieldContainer * const pChild,
    UInt16           const childFieldId)
{
    if(childFieldId == SceneObjectsFieldId)
    {
        SceneObject * pTypedChild =
            dynamic_cast<SceneObject *>(pChild);

        if(pTypedChild != NULL)
        {
            Int32 iChildIdx = _mfSceneObjects.findIndex(pTypedChild);

            if(iChildIdx != -1)
            {
                editMField(SceneObjectsFieldMask, _mfSceneObjects);

                _mfSceneObjects.erase(iChildIdx);

                return true;
            }

            FWARNING(("SceneBase::unlinkParent: Child <-> "
                      "Parent link inconsistent.\n"));

            return false;
        }

        return false;
    }


    return Inherited::unlinkChild(pChild, childFieldId);
}

void SceneBase::onCreate(const Scene *source)
{
    Inherited::onCreate(source);

    if(source != NULL)
    {
        Scene *pThis = static_cast<Scene *>(this);

        MFUnrecChildSceneObjectPtr::const_iterator SceneObjectsIt  =
            source->_mfSceneObjects.begin();
        MFUnrecChildSceneObjectPtr::const_iterator SceneObjectsEnd =
            source->_mfSceneObjects.end  ();

        while(SceneObjectsIt != SceneObjectsEnd)
        {
            pThis->pushToSceneObjects(*SceneObjectsIt);

            ++SceneObjectsIt;
        }

        MFUnrecFieldContainerPtr::const_iterator ObjectStoreIt  =
            source->_mfObjectStore.begin();
        MFUnrecFieldContainerPtr::const_iterator ObjectStoreEnd =
            source->_mfObjectStore.end  ();

        while(ObjectStoreIt != ObjectStoreEnd)
        {
            pThis->pushToObjectStore(*ObjectStoreIt);

            ++ObjectStoreIt;
        }

        MFUnrecViewportPtr::const_iterator ViewportsIt  =
            source->_mfViewports.begin();
        MFUnrecViewportPtr::const_iterator ViewportsEnd =
            source->_mfViewports.end  ();

        while(ViewportsIt != ViewportsEnd)
        {
            pThis->pushToViewports(*ViewportsIt);

            ++ViewportsIt;
        }

        MFUnrecUIDrawingSurfacePtr::const_iterator UIDrawingSurfacesIt  =
            source->_mfUIDrawingSurfaces.begin();
        MFUnrecUIDrawingSurfacePtr::const_iterator UIDrawingSurfacesEnd =
            source->_mfUIDrawingSurfaces.end  ();

        while(UIDrawingSurfacesIt != UIDrawingSurfacesEnd)
        {
            pThis->pushToUIDrawingSurfaces(*UIDrawingSurfacesIt);

            ++UIDrawingSurfacesIt;
        }

        MFUnrecAnimationPtr::const_iterator AnimationsIt  =
            source->_mfAnimations.begin();
        MFUnrecAnimationPtr::const_iterator AnimationsEnd =
            source->_mfAnimations.end  ();

        while(AnimationsIt != AnimationsEnd)
        {
            pThis->pushToAnimations(*AnimationsIt);

            ++AnimationsIt;
        }

        MFUnrecAnimationPtr::const_iterator InitialAnimationsIt  =
            source->_mfInitialAnimations.begin();
        MFUnrecAnimationPtr::const_iterator InitialAnimationsEnd =
            source->_mfInitialAnimations.end  ();

        while(InitialAnimationsIt != InitialAnimationsEnd)
        {
            pThis->pushToInitialAnimations(*InitialAnimationsIt);

            ++InitialAnimationsIt;
        }

        MFUnrecParticleSystemPtr::const_iterator InitialParticleSystemsIt  =
            source->_mfInitialParticleSystems.begin();
        MFUnrecParticleSystemPtr::const_iterator InitialParticleSystemsEnd =
            source->_mfInitialParticleSystems.end  ();

        while(InitialParticleSystemsIt != InitialParticleSystemsEnd)
        {
            pThis->pushToInitialParticleSystems(*InitialParticleSystemsIt);

            ++InitialParticleSystemsIt;
        }

        pThis->setPhysicsHandler(source->getPhysicsHandler());

        pThis->setPhysicsWorld(source->getPhysicsWorld());
    }
}

GetFieldHandlePtr SceneBase::getHandleSceneObjects    (void) const
{
    MFUnrecChildSceneObjectPtr::GetHandlePtr returnValue(
        new  MFUnrecChildSceneObjectPtr::GetHandle(
             &_mfSceneObjects,
             this->getType().getFieldDesc(SceneObjectsFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleSceneObjects   (void)
{
    MFUnrecChildSceneObjectPtr::EditHandlePtr returnValue(
        new  MFUnrecChildSceneObjectPtr::EditHandle(
             &_mfSceneObjects,
             this->getType().getFieldDesc(SceneObjectsFieldId),
             this));

    returnValue->setAddMethod(
        boost::bind(&Scene::pushToSceneObjects,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveMethod(
        boost::bind(&Scene::removeFromSceneObjects,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveObjMethod(
        boost::bind(&Scene::removeObjFromSceneObjects,
                    static_cast<Scene *>(this), _1));
    returnValue->setClearMethod(
        boost::bind(&Scene::clearSceneObjects,
                    static_cast<Scene *>(this)));

    editMField(SceneObjectsFieldMask, _mfSceneObjects);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleParentProject   (void) const
{
    SFParentFieldContainerPtr::GetHandlePtr returnValue;

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleParentProject  (void)
{
    EditFieldHandlePtr returnValue;

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleObjectStore     (void) const
{
    MFUnrecFieldContainerPtr::GetHandlePtr returnValue(
        new  MFUnrecFieldContainerPtr::GetHandle(
             &_mfObjectStore,
             this->getType().getFieldDesc(ObjectStoreFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleObjectStore    (void)
{
    MFUnrecFieldContainerPtr::EditHandlePtr returnValue(
        new  MFUnrecFieldContainerPtr::EditHandle(
             &_mfObjectStore,
             this->getType().getFieldDesc(ObjectStoreFieldId),
             this));

    returnValue->setAddMethod(
        boost::bind(&Scene::pushToObjectStore,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveMethod(
        boost::bind(&Scene::removeFromObjectStore,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveObjMethod(
        boost::bind(&Scene::removeObjFromObjectStore,
                    static_cast<Scene *>(this), _1));
    returnValue->setClearMethod(
        boost::bind(&Scene::clearObjectStore,
                    static_cast<Scene *>(this)));

    editMField(ObjectStoreFieldMask, _mfObjectStore);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleViewports       (void) const
{
    MFUnrecViewportPtr::GetHandlePtr returnValue(
        new  MFUnrecViewportPtr::GetHandle(
             &_mfViewports,
             this->getType().getFieldDesc(ViewportsFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleViewports      (void)
{
    MFUnrecViewportPtr::EditHandlePtr returnValue(
        new  MFUnrecViewportPtr::EditHandle(
             &_mfViewports,
             this->getType().getFieldDesc(ViewportsFieldId),
             this));

    returnValue->setAddMethod(
        boost::bind(&Scene::pushToViewports,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveMethod(
        boost::bind(&Scene::removeFromViewports,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveObjMethod(
        boost::bind(&Scene::removeObjFromViewports,
                    static_cast<Scene *>(this), _1));
    returnValue->setClearMethod(
        boost::bind(&Scene::clearViewports,
                    static_cast<Scene *>(this)));

    editMField(ViewportsFieldMask, _mfViewports);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleUIDrawingSurfaces (void) const
{
    MFUnrecUIDrawingSurfacePtr::GetHandlePtr returnValue(
        new  MFUnrecUIDrawingSurfacePtr::GetHandle(
             &_mfUIDrawingSurfaces,
             this->getType().getFieldDesc(UIDrawingSurfacesFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleUIDrawingSurfaces(void)
{
    MFUnrecUIDrawingSurfacePtr::EditHandlePtr returnValue(
        new  MFUnrecUIDrawingSurfacePtr::EditHandle(
             &_mfUIDrawingSurfaces,
             this->getType().getFieldDesc(UIDrawingSurfacesFieldId),
             this));

    returnValue->setAddMethod(
        boost::bind(&Scene::pushToUIDrawingSurfaces,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveMethod(
        boost::bind(&Scene::removeFromUIDrawingSurfaces,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveObjMethod(
        boost::bind(&Scene::removeObjFromUIDrawingSurfaces,
                    static_cast<Scene *>(this), _1));
    returnValue->setClearMethod(
        boost::bind(&Scene::clearUIDrawingSurfaces,
                    static_cast<Scene *>(this)));

    editMField(UIDrawingSurfacesFieldMask, _mfUIDrawingSurfaces);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleAnimations      (void) const
{
    MFUnrecAnimationPtr::GetHandlePtr returnValue(
        new  MFUnrecAnimationPtr::GetHandle(
             &_mfAnimations,
             this->getType().getFieldDesc(AnimationsFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleAnimations     (void)
{
    MFUnrecAnimationPtr::EditHandlePtr returnValue(
        new  MFUnrecAnimationPtr::EditHandle(
             &_mfAnimations,
             this->getType().getFieldDesc(AnimationsFieldId),
             this));

    returnValue->setAddMethod(
        boost::bind(&Scene::pushToAnimations,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveMethod(
        boost::bind(&Scene::removeFromAnimations,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveObjMethod(
        boost::bind(&Scene::removeObjFromAnimations,
                    static_cast<Scene *>(this), _1));
    returnValue->setClearMethod(
        boost::bind(&Scene::clearAnimations,
                    static_cast<Scene *>(this)));

    editMField(AnimationsFieldMask, _mfAnimations);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleInitialAnimations (void) const
{
    MFUnrecAnimationPtr::GetHandlePtr returnValue(
        new  MFUnrecAnimationPtr::GetHandle(
             &_mfInitialAnimations,
             this->getType().getFieldDesc(InitialAnimationsFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleInitialAnimations(void)
{
    MFUnrecAnimationPtr::EditHandlePtr returnValue(
        new  MFUnrecAnimationPtr::EditHandle(
             &_mfInitialAnimations,
             this->getType().getFieldDesc(InitialAnimationsFieldId),
             this));

    returnValue->setAddMethod(
        boost::bind(&Scene::pushToInitialAnimations,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveMethod(
        boost::bind(&Scene::removeFromInitialAnimations,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveObjMethod(
        boost::bind(&Scene::removeObjFromInitialAnimations,
                    static_cast<Scene *>(this), _1));
    returnValue->setClearMethod(
        boost::bind(&Scene::clearInitialAnimations,
                    static_cast<Scene *>(this)));

    editMField(InitialAnimationsFieldMask, _mfInitialAnimations);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleInitialParticleSystems (void) const
{
    MFUnrecParticleSystemPtr::GetHandlePtr returnValue(
        new  MFUnrecParticleSystemPtr::GetHandle(
             &_mfInitialParticleSystems,
             this->getType().getFieldDesc(InitialParticleSystemsFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleInitialParticleSystems(void)
{
    MFUnrecParticleSystemPtr::EditHandlePtr returnValue(
        new  MFUnrecParticleSystemPtr::EditHandle(
             &_mfInitialParticleSystems,
             this->getType().getFieldDesc(InitialParticleSystemsFieldId),
             this));

    returnValue->setAddMethod(
        boost::bind(&Scene::pushToInitialParticleSystems,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveMethod(
        boost::bind(&Scene::removeFromInitialParticleSystems,
                    static_cast<Scene *>(this), _1));
    returnValue->setRemoveObjMethod(
        boost::bind(&Scene::removeObjFromInitialParticleSystems,
                    static_cast<Scene *>(this), _1));
    returnValue->setClearMethod(
        boost::bind(&Scene::clearInitialParticleSystems,
                    static_cast<Scene *>(this)));

    editMField(InitialParticleSystemsFieldMask, _mfInitialParticleSystems);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleLuaModule       (void) const
{
    SFBoostPath::GetHandlePtr returnValue(
        new  SFBoostPath::GetHandle(
             &_sfLuaModule,
             this->getType().getFieldDesc(LuaModuleFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleLuaModule      (void)
{
    SFBoostPath::EditHandlePtr returnValue(
        new  SFBoostPath::EditHandle(
             &_sfLuaModule,
             this->getType().getFieldDesc(LuaModuleFieldId),
             this));


    editSField(LuaModuleFieldMask);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandlePhysicsHandler  (void) const
{
    SFUnrecPhysicsHandlerPtr::GetHandlePtr returnValue(
        new  SFUnrecPhysicsHandlerPtr::GetHandle(
             &_sfPhysicsHandler,
             this->getType().getFieldDesc(PhysicsHandlerFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandlePhysicsHandler (void)
{
    SFUnrecPhysicsHandlerPtr::EditHandlePtr returnValue(
        new  SFUnrecPhysicsHandlerPtr::EditHandle(
             &_sfPhysicsHandler,
             this->getType().getFieldDesc(PhysicsHandlerFieldId),
             this));

    returnValue->setSetMethod(
        boost::bind(&Scene::setPhysicsHandler,
                    static_cast<Scene *>(this), _1));

    editSField(PhysicsHandlerFieldMask);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandlePhysicsWorld    (void) const
{
    SFUnrecPhysicsWorldPtr::GetHandlePtr returnValue(
        new  SFUnrecPhysicsWorldPtr::GetHandle(
             &_sfPhysicsWorld,
             this->getType().getFieldDesc(PhysicsWorldFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandlePhysicsWorld   (void)
{
    SFUnrecPhysicsWorldPtr::EditHandlePtr returnValue(
        new  SFUnrecPhysicsWorldPtr::EditHandle(
             &_sfPhysicsWorld,
             this->getType().getFieldDesc(PhysicsWorldFieldId),
             this));

    returnValue->setSetMethod(
        boost::bind(&Scene::setPhysicsWorld,
                    static_cast<Scene *>(this), _1));

    editSField(PhysicsWorldFieldMask);

    return returnValue;
}

GetFieldHandlePtr SceneBase::getHandleGenericMethodIDs (void) const
{
    SFUInt32::GetHandlePtr returnValue(
        new  SFUInt32::GetHandle(
             &_sfGenericMethodIDs,
             this->getType().getFieldDesc(GenericMethodIDsFieldId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

EditFieldHandlePtr SceneBase::editHandleGenericMethodIDs(void)
{
    SFUInt32::EditHandlePtr returnValue(
        new  SFUInt32::EditHandle(
             &_sfGenericMethodIDs,
             this->getType().getFieldDesc(GenericMethodIDsFieldId),
             this));


    editSField(GenericMethodIDsFieldMask);

    return returnValue;
}


GetEventHandlePtr SceneBase::getHandleSceneEnteredSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<SceneEnteredEventType>(
             const_cast<SceneEnteredEventType *>(&_SceneEnteredEvent),
             _producerType.getEventDescription(SceneEnteredEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleSceneExitedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<SceneExitedEventType>(
             const_cast<SceneExitedEventType *>(&_SceneExitedEvent),
             _producerType.getEventDescription(SceneExitedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleSceneStartedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<SceneStartedEventType>(
             const_cast<SceneStartedEventType *>(&_SceneStartedEvent),
             _producerType.getEventDescription(SceneStartedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleSceneEndedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<SceneEndedEventType>(
             const_cast<SceneEndedEventType *>(&_SceneEndedEvent),
             _producerType.getEventDescription(SceneEndedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleSceneResetSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<SceneResetEventType>(
             const_cast<SceneResetEventType *>(&_SceneResetEvent),
             _producerType.getEventDescription(SceneResetEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowOpenedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowOpenedEventType>(
             const_cast<WindowOpenedEventType *>(&_WindowOpenedEvent),
             _producerType.getEventDescription(WindowOpenedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowClosingSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowClosingEventType>(
             const_cast<WindowClosingEventType *>(&_WindowClosingEvent),
             _producerType.getEventDescription(WindowClosingEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowClosedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowClosedEventType>(
             const_cast<WindowClosedEventType *>(&_WindowClosedEvent),
             _producerType.getEventDescription(WindowClosedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowIconifiedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowIconifiedEventType>(
             const_cast<WindowIconifiedEventType *>(&_WindowIconifiedEvent),
             _producerType.getEventDescription(WindowIconifiedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowDeiconifiedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowDeiconifiedEventType>(
             const_cast<WindowDeiconifiedEventType *>(&_WindowDeiconifiedEvent),
             _producerType.getEventDescription(WindowDeiconifiedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowActivatedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowActivatedEventType>(
             const_cast<WindowActivatedEventType *>(&_WindowActivatedEvent),
             _producerType.getEventDescription(WindowActivatedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowDeactivatedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowDeactivatedEventType>(
             const_cast<WindowDeactivatedEventType *>(&_WindowDeactivatedEvent),
             _producerType.getEventDescription(WindowDeactivatedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowEnteredSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowEnteredEventType>(
             const_cast<WindowEnteredEventType *>(&_WindowEnteredEvent),
             _producerType.getEventDescription(WindowEnteredEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleWindowExitedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<WindowExitedEventType>(
             const_cast<WindowExitedEventType *>(&_WindowExitedEvent),
             _producerType.getEventDescription(WindowExitedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMouseClickedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MouseClickedEventType>(
             const_cast<MouseClickedEventType *>(&_MouseClickedEvent),
             _producerType.getEventDescription(MouseClickedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMouseEnteredSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MouseEnteredEventType>(
             const_cast<MouseEnteredEventType *>(&_MouseEnteredEvent),
             _producerType.getEventDescription(MouseEnteredEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMouseExitedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MouseExitedEventType>(
             const_cast<MouseExitedEventType *>(&_MouseExitedEvent),
             _producerType.getEventDescription(MouseExitedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMousePressedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MousePressedEventType>(
             const_cast<MousePressedEventType *>(&_MousePressedEvent),
             _producerType.getEventDescription(MousePressedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMouseReleasedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MouseReleasedEventType>(
             const_cast<MouseReleasedEventType *>(&_MouseReleasedEvent),
             _producerType.getEventDescription(MouseReleasedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMouseMovedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MouseMovedEventType>(
             const_cast<MouseMovedEventType *>(&_MouseMovedEvent),
             _producerType.getEventDescription(MouseMovedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMouseDraggedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MouseDraggedEventType>(
             const_cast<MouseDraggedEventType *>(&_MouseDraggedEvent),
             _producerType.getEventDescription(MouseDraggedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleMouseWheelMovedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<MouseWheelMovedEventType>(
             const_cast<MouseWheelMovedEventType *>(&_MouseWheelMovedEvent),
             _producerType.getEventDescription(MouseWheelMovedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleKeyPressedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<KeyPressedEventType>(
             const_cast<KeyPressedEventType *>(&_KeyPressedEvent),
             _producerType.getEventDescription(KeyPressedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleKeyReleasedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<KeyReleasedEventType>(
             const_cast<KeyReleasedEventType *>(&_KeyReleasedEvent),
             _producerType.getEventDescription(KeyReleasedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleKeyTypedSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<KeyTypedEventType>(
             const_cast<KeyTypedEventType *>(&_KeyTypedEvent),
             _producerType.getEventDescription(KeyTypedEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}

GetEventHandlePtr SceneBase::getHandleUpdateSignal(void) const
{
    GetEventHandlePtr returnValue(
        new  GetTypedEventHandle<UpdateEventType>(
             const_cast<UpdateEventType *>(&_UpdateEvent),
             _producerType.getEventDescription(UpdateEventId),
             const_cast<SceneBase *>(this)));

    return returnValue;
}


#ifdef OSG_MT_CPTR_ASPECT
void SceneBase::execSyncV(      FieldContainer    &oFrom,
                                        ConstFieldMaskArg  whichField,
                                        AspectOffsetStore &oOffsets,
                                        ConstFieldMaskArg  syncMode,
                                  const UInt32             uiSyncInfo)
{
    Scene *pThis = static_cast<Scene *>(this);

    pThis->execSync(static_cast<Scene *>(&oFrom),
                    whichField,
                    oOffsets,
                    syncMode,
                    uiSyncInfo);
}
#endif


#ifdef OSG_MT_CPTR_ASPECT
FieldContainer *SceneBase::createAspectCopy(
    const FieldContainer *pRefAspect) const
{
    Scene *returnValue;

    newAspectCopy(returnValue,
                  dynamic_cast<const Scene *>(pRefAspect),
                  dynamic_cast<const Scene *>(this));

    return returnValue;
}
#endif

void SceneBase::resolveLinks(void)
{
    Inherited::resolveLinks();

    static_cast<Scene *>(this)->clearSceneObjects();

    static_cast<Scene *>(this)->clearObjectStore();

    static_cast<Scene *>(this)->clearViewports();

    static_cast<Scene *>(this)->clearUIDrawingSurfaces();

    static_cast<Scene *>(this)->clearAnimations();

    static_cast<Scene *>(this)->clearInitialAnimations();

    static_cast<Scene *>(this)->clearInitialParticleSystems();

    static_cast<Scene *>(this)->setPhysicsHandler(NULL);

    static_cast<Scene *>(this)->setPhysicsWorld(NULL);


}


OSG_END_NAMESPACE
